# ポートフォリオ仕様・スコープ定義

このドキュメントは「どこまで作るか」を明確にし、**実装・テスト・issueの唯一の根拠**にします。  
詳細な操作手順は `docs/USER_MANUAL.md`、挙動仕様は `docs/BEHAVIOR_SPEC.md` を参照。

---

## 1. 目的（Portfolio Goal）

- **主要フローが最後まで通ること**（アップロード → 結果確認）
- **失敗時の説明が明確**で、操作に詰まらないこと
- **設計判断が伝わる**よう、意図的に未実装の領域を明示

---

## 2. 完成の定義（Done）

以下を満たしたら「ポートフォリオとして完成」とする。

- USER_MANUAL / BEHAVIOR_SPEC の範囲内で**主要フローが通る**
- 重要なエラー条件が**UIで説明される**
- テスト（Vitest / Playwright）で**主要挙動が担保**される
- **非スコープ**が明記され、誤認を防ぐ

---

## 3. スコープ内（実装対象）

### 3.1 主要フロー
- チーム選択（`teamId` クエリ）
- `package-lock.json` / `package.json` のアップロード
- 結果画面の一覧・詳細・検索・フィルタ・AI解説

### 3.2 アップロードの制約
- JSON形式のみ
- 5MB以下
- `.json` 拡張子のみ

### 3.3 通知・エラー表示
- エラーはページ上部のAlert＋トーストで表示

### 3.4 設定画面
- UI表示・操作は可能（**モック挙動**）
- 最後のチーム削除はガードされる

---

## 4. 非スコープ（意図的に未実装）

以下は **「やらない」と決めている**領域。

- 認証 / ロール / 権限管理
- 実DB連携・脆弱性の正確性
- 依存グラフの完全再現
- 複数SBOM形式の本格対応（SPDX/CycloneDX等）
- 設定の永続化
- 監査ログ・履歴管理・通知配信の高度化

---

## 5. UI/UXの基準（誤認防止）

- **入力制約とUI誘導は一致**していること  
  例: 拡張子の accept 表示と実際のバリデーションを一致させる。
- モック挙動は**UI上に明示**すること  
  例: 設定画面・AI解説に「デモ/モック」表記。
- 重要操作（削除等）は**明確な説明**を出す。

---

## 6. 既知ギャップ（改善対象）

この項目は **issue化して解消する**。

1. **ファイル選択のUI表記とバリデーションの不一致**  
   - `accept` と実際のバリデーションがズレるケースを修正
2. **モック挙動の明示が弱い**  
   - 設定画面 / AI解説の「モック」であることが見えづらい
3. **teamIdの保持**  
   - 画面遷移で `teamId` が落ちる導線を整理

---

## 7. Issue一覧（このドキュメントから作成）

### P0（必須）
- [ ] **UIとバリデーションの整合**（#78）  
  - 受け付ける拡張子の表記・挙動を統一
- [ ] **モック表記の明示**（#79）  
  - 設定画面・AI解説に「デモ/モック」の明示
- [ ] **teamIdの遷移維持**（#80）  
  - ヘッダー/リンクで teamId を維持

### P1（改善）
- [ ] **エラーメッセージの文言統一**（#81）  
  - USER_MANUAL / BEHAVIOR_SPEC とUIの文言を一致
- [ ] **操作マニュアルの簡潔化**（#82）  
  - 1ページで迷わず操作できる構成に整理

---

## 8. テスト戦略（このドキュメントに合わせて）

- Vitest：ロジック単体（ガード/解析）
- Playwright：主要フローと重要なエラー
- 仕様変更があれば **TEST_MATRIX を更新**して追従する
