# 操作マニュアル

Dependency Vulnerability Scanner の基本的な操作方法をまとめたマニュアルです。

---

## 1. 基本フロー

1. チームを選択（URL の `teamId` で切り替え）
2. `package-lock.json` / `package.json` をアップロード
3. 解析結果（脆弱性一覧・詳細）を確認

---

## 2. チーム選択

- 画面上部のチームセレクタから選択できます。
- チームは URL の `?teamId=xxx` で管理されます。
- `teamId` がない場合は先頭のチームが選択され、URL に反映されます。

### ヒント
- プロジェクト一覧では `/?teamId=...` ではなく `/projects?teamId=...` で切り替わります。
- アップロード先を明示したい場合は、URL を `/?teamId=xxx` にしてアクセスしてください。

---

## 3. アップロード

### 対応ファイル
- `package-lock.json`（v2 / v3）
- `package.json`

### 制約
- JSON 形式のみ
- `.json` 拡張子のみ
- 5MB 以下
- 正しい JSON であること

### 手順
1. ルート `/` でファイルをドラッグ&ドロップ
2. 解析が自動で開始されます
3. 完了後、結果画面へ遷移します

### エラー表示
不正なファイルやサイズ超過の場合、画面上部のエラーとトーストで理由が表示されます。

---

## 4. プロジェクト一覧

- `/projects` でチームごとのプロジェクト一覧を確認できます。
- 解析が完了したプロジェクトをクリックすると詳細画面へ移動します。
- 解析中/失敗のプロジェクトは詳細へ遷移できません。
- カード右上のメニューから、プロジェクト名の変更/削除ができます（永続化）。

---

## 5. 脆弱性詳細画面

### 5.1 サマリー
- 深刻度別の件数が表示されます。

### 5.2 フィルタ
- 深刻度、依存タイプ（prod/dev）、検索（パッケージ名/CVE）で絞り込み可能です。

### 5.3 Root Dependency グルーピング
- 直依存単位でグルーピングして表示されます。
- グループ見出しに件数が表示されます。

### 5.4 詳細ドロワー
- 行クリックで詳細ドロワーを開きます。
- Dependency Path / 参照リンク / 推奨アクションを確認できます。

### 5.5 AI 解説
- 「AI解説」ボタンで Gemini の解説を表示します。
- API キー未設定の場合はモックの回答になります。
- モックの場合はダイアログ内に注記が表示されます。

---

## 6. 設定

- `/settings` でチーム名変更・削除などの UI を確認できます。
- これらの操作は **モック挙動** です（永続保存は行いません）。
- 画面上にモックである旨の注記が表示されます。

---

## 7. モック脆弱性DBについて

- 既知ルールに一致する脆弱性を返します。
- ルールに一致しない場合は、入力に応じた **決定論的な擬似結果** を生成します。
