import { Box, Grid, Paper, Typography } from "@mui/material";
import type { Severity, VulnerabilitySummary } from "../../types/viewModel";

type SeverityConfig = {
  label: Severity;
  textColor: string;
  bgColor: string;
};

const SEVERITY_CONFIGS: SeverityConfig[] = [
  { label: "Critical", textColor: "error.main", bgColor: "error.50" },
  { label: "High", textColor: "error.main", bgColor: "error.50" },
  { label: "Medium", textColor: "warning.main", bgColor: "warning.50" },
  { label: "Low", textColor: "info.main", bgColor: "info.50" },
];

export const VulnerabilitySummaryCard = ({
  summary,
}: {
  summary: VulnerabilitySummary;
}) => {
  return (
    <Paper sx={{ p: 3, mb: 3 }}>
      <Box sx={{ display: "flex", alignItems: "baseline", gap: 2, mb: 2 }}>
        <Typography variant="h6" fontWeight="bold">
          脆弱性サマリー
        </Typography>
        <Typography variant="body2" color="text.secondary">
          合計 {summary.total} 件
        </Typography>
      </Box>

      <Grid container spacing={2}>
        {SEVERITY_CONFIGS.map((severity) => (
          <Grid key={severity.label} size={{ xs: 12, sm: 6, md: 3 }}>
            <Box
              sx={{
                p: 2,
                borderRadius: 2,
                bgcolor: severity.bgColor,
                border: "1px solid",
                borderColor: "divider",
              }}
            >
              <Typography
                variant="caption"
                color="text.secondary"
                sx={{ letterSpacing: 0.5 }}
              >
                {severity.label}
              </Typography>
              <Typography
                variant="h4"
                fontWeight="bold"
                sx={{ color: severity.textColor, lineHeight: 1.2 }}
              >
                {summary.bySeverity[severity.label]}
              </Typography>
            </Box>
          </Grid>
        ))}
      </Grid>
    </Paper>
  );
};
